.college-list-container
    .jarviswidget.jarviswidget-color-blueDark.payment-detail
        header(role='heading')
            .jarviswidget-ctrls(role='menu')
            span.widget-icon
                i.fa.fa-table
            h2 {{paymentFn.personCostData.name}}
            span.jarviswidget-loader
                i.fa.fa-refresh.fa-spin
            .col-sm-1.col-xs-6.hidden-xs(style="float:right;margin-right:20px;")
                .ColVis
                    button.btn.btn-primary(type='button' ng-click="paymentFn.goBackHomePage()")
                        span 返回
        // widget div
        div.payment-detail-content(role='content')
            .widget-body.no-padding
                .edit-payment-content
                    i.fa.fa-exclamation-triangle.edit-payment-icon
                    span 修改额度后只会影响还未缴费的人员
                .edit-payment-content(ng-show='!paymentFn.showPaymentStyle && !paymentFn.showPaymentTime')
                    .payment-style-content
                        span 支付方式:
                        span(ng-class="paymentFn.personCostData.paymentType==10?'payment-name-all':'payment-name-staging'") {{paymentFn.personCostData.paymentString}}
                        span.edit-payment-style(ng-click="paymentFn.showPaymentStyle=true" ng-show="paymentFn.personCostData.publishState != 70") 修改
                .edit-payment-content(ng-show='paymentFn.showPaymentStyle&& !paymentFn.showPaymentTime')
                    .payment-style-content
                        span.payment-style 缴费方式:
                        .payment-style-icon
                            i.fa.style-icon-margin(ng-class="paymentFn.personCostData.paymentType==10?'fa-check-circle':'fa-circle-o'" ng-click="paymentFn.personCostData.paymentType=10")
                            span 全款缴费
                        .payment-style-icon
                            i.fa.style-icon-margin(ng-class="paymentFn.personCostData.paymentType==20?'fa-check-circle':'fa-circle-o'" ng-click="paymentFn.personCostData.paymentType=20")
                            span 可以分期
                    .payment-style-content(ng-show='paymentFn.personCostData.paymentType==20')
                        span.payment-style 最低支付限额设置:
                        i.fa.fa-jpy.style-icon-margin
                        input.payment-amount(style='text' ng-model="paymentFn.personCostData.smallAmount" maxlength="6" ng-keyup="paymentFn.inputKeyUpFun()")
                        span.style-icon-margin 元
                    .payment-style-content(ng-show='paymentFn.personCostData.paymentType==20')
                        span.payment-style 额度限制频次:
                        .payment-style-icon
                            i.fa.style-icon-margin(ng-class="paymentFn.personCostData.installmentRate==10?'fa-check-circle':'fa-circle-o'" ng-click="paymentFn.personCostData.installmentRate=10")
                            span 首次缴费
                        .payment-style-icon
                            i.fa.style-icon-margin(ng-class="paymentFn.personCostData.installmentRate==20?'fa-check-circle':'fa-circle-o'" ng-click="paymentFn.personCostData.installmentRate=20")
                            span 每次缴费
                    .payment-style-content()
                        button.edit-button(ng-click="paymentFn.editPersonPayment()") 修改
                .edit-payment-content(ng-show='!paymentFn.showPaymentStyle && !paymentFn.showPaymentTime')
                    .payment-style-content
                        span 截止日期:
                        span.payment-time {{paymentFn.personCostData.lastDate}}
                        span.edit-payment-style(ng-click="paymentFn.showPaymentTime=true" ng-show="paymentFn.personCostData.publishState != 70") 修改
                .edit-payment-content(ng-show='paymentFn.showPaymentTime&&!paymentFn.showPaymentStyle')
                    .payment-style-content
                        span 截止日期:
                        .input-append.date.datepicker.datepicker-basic.no-padding.deadline.edit-person-time(data-date='', data-date-format='yyyy-mm-dd' set-start-time="true" b-datepicker id="startDate")
                            input.form-control(size='16', ng-disabled='true' name="dateStart" placeholder='请选择截止日期' type='text' ng-model="paymentFn.personCostData.lastDate" validator="required")
                            span.add-on
                                i.icon-calendar.glyphicon.glyphicon-calendar
                        span.edit-payment-style(ng-click="paymentFn.editPersonTime()") 确定
    .jarviswidget.jarviswidget-color-blueDark.payment-detail
        header(role='heading')
            .jarviswidget-ctrls(role='menu')
            span.widget-icon
                i.fa.fa-table
            h2 已收费详情
            span.jarviswidget-loader
                i.fa.fa-refresh.fa-spin
        // widget div
        div.payment-detail-content(role='content')
            .widget-body.no-padding
                .charges-details
                    .charges-details-content.right
                        span 费用名称：
                        span 人数总计：
                        span 未交费人数：
                        span 欠费人数：
                        span.bottom-line 已结清人数总计：
                    .charges-details-content.left
                        span {{paymentFn.personCal.name}}
                        span {{paymentFn.personCal.totalPersons }}人
                        span {{paymentFn.personCal.noPayPersons  }}人
                        span {{paymentFn.personCal.owedPersons  }}人
                        span.bottom-line {{paymentFn.personCal.completePersions  }}人
                    .charges-details-content.right
                        span
                        span 应交金额总计：
                        span 未交费金额总计：
                        span 欠费已缴金额总计：
                        span.bottom-line 已结清金额总计：
                    .charges-details-content.left
                        span
                        span ￥{{paymentFn.personCal.totalShouldPay }}元
                        span ￥{{paymentFn.personCal.noPayShouldPay}}元
                        span ￥{{paymentFn.personCal.owedHasPay  }}元
                        span.bottom-line ￥{{paymentFn.personCal.completeHasPay  }}元
    .jarviswidget.jarviswidget-color-blueDark.payment-detail
        div.payment-detail-content(role='content')
            .total-payment
                span 实际交费金额总计：
                span ￥{{paymentFn.personCal.owedHasPay+paymentFn.personCal.completeHasPay}}元
    #wid-id-2.tabBlock.jarviswidget.jarviswidget-color-blueDark.jarviswidget-sortable(d ata-widget-editbutton='false', style='', role='widget')
        header(role='heading')
            .jarviswidget-ctrls(role='menu')
            ul.tabBlock-tabs.nav.nav-tabs.pull-left.in
                li.tabBlock-tab.active.cursor-pointer(ng-click="paymentFn.switchOneTab('showByPerson')" role="navigation")
                    a(data-toggle='tab',  aria-expanded='true')
                        i.fa.fa-lg.fa-calendar
                        span.hidden-mobile.hidden-tablet  按人员查看
                li.tabBlock-tab.cursor-pointer(ng-click="paymentFn.switchOneTab('showByPayment')" role="navigation")
                    a(data-toggle='tab',  aria-expanded='false')
                        i.fa.fa-lg.fa-clock-o
                        span.hidden-mobile.hidden-tablet 按支付明细查看
        div(role='content')
            .widget-body.no-padding
                .tab-content
                    .tabbable.tabs-below(ng-if="paymentFn.tabType=='showByPerson'")
                        .tab-content
                            .no-padding
                                .dataTables_wrapper.form-inline.no-footer
                                    .col-xs-12.col-sm-4
                                        label 姓名/身份证号：
                                            input.form-control(type='search', aria-controls='datatable_col_reorder' ng-model="paymentFn.searchPaymentName")
                                    .col-xs-12.col-sm-3
                                        label 缴费状态：
                                            select.select2.form-control(ng-model="paymentFn.paymentStatus"  ng-options="payment.name for payment in paymentFn.paymentStatusList" )
                                    .col-xs-12.col-sm-3
                                        label 专业：
                                            select.select2.form-control(ng-model="paymentFn.major"  ng-options="major.name for major in paymentFn.majorList" )
                                    .col-sm-1.col-xs-6.hidden-xs
                                        .ColVis
                                            button.btn.btn-primary(type='button' ng-click="paymentFn.getPersonCostList()")
                                                span 查询
                                    .col-sm-1.col-xs-6.hidden-xs
                                        .ColVis
                                            button.btn.btn-primary(type='button' ng-click="paymentFn.exportPersonExcel()")
                                                span 导出数据
                                    table.table.table-striped.table-bordered.table-hover.dataTable.no-footer(width='100%', role='grid', aria-describedby='datatable_col_reorder_info', style='width: 100%;')
                                        thead
                                            tr(role='row')
                                                th 序号
                                                th 交费人
                                                th 身份证号
                                                th 专业
                                                th 应缴金额
                                                th 实交金额
                                                th 欠费金额
                                                th 状态
                                                th 收费明细
                                                th 支付明细
                                        tbody
                                            tr.odd(role='row' ng-repeat="personCost in paymentFn.personCostList")
                                                td.sorting_1 {{$index+1 + ((paymentFn.personPage.pageNumber==0?paymentFn.personPage.pageNumber+1:paymentFn.personPage.pageNumber)-1)*5}}
                                                td {{personCost.name}}
                                                td {{personCost.idNumber}}
                                                td {{personCost.professionalName}}
                                                td ￥{{personCost.shouldPay}}
                                                td ￥{{personCost.hasPay}}
                                                td ￥{{personCost.shouldPay-personCost.hasPay}}
                                                td {{personCost.paymentState==10?'未交费':personCost.paymentState==20?'有欠费':'已结清'}}
                                                td {{personCost.payDesc}}
                                                td
                                                    a.handle(ng-click="paymentFn.showPersonPayDetail(personCost.id)")
                                                        i.fa.fa-pencil-square-o
                                                        span 查看

                                    .dt-toolbar-footer
                                        .col-sm-6.col-xs-12.hidden-xs
                                            .dataTables_info(role='status', aria-live='polite')
                                                | 显示第
                                                span.txt-color-darken {{paymentFn.personPage.pageNumber==0?paymentFn.personPage.pageNumber*5:(paymentFn.personPage.pageNumber-1)*5+1}}
                                                |  到
                                                span.txt-color-darken {{((paymentFn.personPage.pageNumber==0?paymentFn.personPage.pageNumber+1:paymentFn.personPage.pageNumber)-1)*5+paymentFn.personCostList.length}}
                                                |  条 总共
                                                span.text-primary {{paymentFn.personPage.totalElements}}
                                                |  条记录
                                        .col-sm-6.col-xs-12
                                            #datatable_col_reorder_paginate.dataTables_paginate.paging_simple_numbers
                                                ul.pagination-sm(uib-pagination, total-items='paymentFn.personPage.totalElements', max-size='paymentFn.personPage.pageSize' items-per-page="paymentFn.personPage.pageSize" ng-model='paymentFn.personPage.pageNumber',ng-change="paymentFn.getPersonCostList()" boundary-link-numbers='true' rotate='false' previous-text="<" next-text=">")
                    .tabbable.tabs-below(ng-if="paymentFn.tabType=='showByPayment'")
                        .tab-content
                            .no-padding
                                .dataTables_wrapper.form-inline.no-footer
                                    .col-xs-12.col-sm-4
                                        label 付款单号/支付宝订单号/缴费人：
                                            input.form-control(type='search', aria-controls='datatable_col_reorder' ng-model="paymentFn.orderParams.searchOrderName")
                                    .col-xs-12.col-sm-4
                                        .search-time
                                            span.search-time-label 日期范围：
                                            .input-append.date.datepicker.datepicker-basic.no-padding.inline-block(data-date='', data-date-format='yyyy-mm-dd'  b-datepicker id="startTime")
                                                input.form-control(size='16', ng-disabled='true' name="dateStart" placeholder='请选择开始日期' type='text' ng-model="paymentFn.orderParams.startDate" validator="required")
                                                span.add-on
                                                    i.icon-calendar.glyphicon.glyphicon-calendar
                                            span(style="margin:0 3px").search-time-label  至
                                            .input-append.date.datepicker.datepicker-basic.no-padding.inline-block(data-date='', data-date-format='yyyy-mm-dd' b-datepicker id="endTime")
                                                input.form-control(size='16', ng-disabled='true' name="dateStart" placeholder='请选择结束日期' type='text' ng-model="paymentFn.orderParams.endDate" validator="required")
                                                span.add-on
                                                    i.icon-calendar.glyphicon.glyphicon-calendar
                                    .col-sm-1.col-xs-6.hidden-xs
                                        .ColVis
                                            button.btn.btn-primary(type='button' ng-click="paymentFn.getOrderCostList()")
                                                span 查询
                                    .col-sm-1.col-xs-6.hidden-xs
                                        .ColVis
                                            button.btn.btn-primary(type='button' ng-click="paymentFn.exportOrderExcel()")
                                                span 导出数据
                                    table.table.table-striped.table-bordered.table-hover.dataTable.no-footer(width='100%', role='grid', aria-describedby='datatable_col_reorder_info', style='width: 100%;')
                                        thead
                                            tr(role='row')
                                                th 序号
                                                th 付款单号
                                                th 缴费人
                                                th 身份证号
                                                th 支付金额
                                                th 支付时间
                                                th 状态
                                                th 支付宝订单号
                                        tbody
                                            tr.odd(role='row' ng-repeat="orderCost in paymentFn.orderCostList")
                                                td.sorting_1 {{$index+1 + ((paymentFn.orderPage.pageNumber==0?paymentFn.orderPage.pageNumber+1:paymentFn.orderPage.pageNumber)-1)*5}}
                                                td {{orderCost.orderNo}}
                                                td {{orderCost.name}}
                                                td {{orderCost.idNumber}}
                                                td {{orderCost.amount}}
                                                td {{orderCost.payTime}}
                                                td {{orderCost.orderState}}
                                                td {{orderCost.aliOrderNo }}

                                    .dt-toolbar-footer
                                        .col-sm-6.col-xs-12.hidden-xs
                                            .dataTables_info(role='status', aria-live='polite')
                                                | 显示第
                                                span.txt-color-darken {{paymentFn.orderPage.pageNumber==0?paymentFn.orderPage.pageNumber*5:(paymentFn.orderPage.pageNumber-1)*5+1}}
                                                |  到
                                                span.txt-color-darken {{((paymentFn.orderPage.pageNumber==0?paymentFn.orderPage.pageNumber+1:paymentFn.orderPage.pageNumber)-1)*5+paymentFn.orderCostList.length}}
                                                |  条 总共
                                                span.text-primary {{paymentFn.orderPage.totalElements}}
                                                |  条记录
                                        .col-sm-6.col-xs-12
                                            .dataTables_paginate.paging_simple_numbers
                                                ul.pagination-sm(uib-pagination, total-items='paymentFn.orderPage.totalElements', max-size='paymentFn.orderPage.pageSize' items-per-page="paymentFn.orderPage.pageSize" ng-model='paymentFn.orderPage.pageNumber',ng-change="paymentFn.getOrderCostList()" boundary-link-numbers='true' rotate='false' previous-text="<" next-text=">")
script(type='text/ng-template',id='importResultDialog')
    .repeatLoad
        .repeat_header.payment-details-header
            i.fa.fa-table
            span.buld 支付明细
        .payment-details-list
            .details-content(ng-repeat="detail in paymentFn.personPayDetailList")
                span 付款单号：{{detail.orderNo}}
                span 付款日期：{{detail.payTime}}
                span 付款金额：￥{{detail.amount}}
                span 支付宝订单号：{{detail.aliOrderNo}}
